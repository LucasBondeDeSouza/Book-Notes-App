<div class="modal fade" id="modalFollower" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Followers</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <div id="followerList">
                    <!-- Lista de seguidores será injetada aqui -->
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const modalElement = document.getElementById('modalFollower');
        modalElement.addEventListener('show.bs.modal', async function () {
            const showFollowerModal = document.getElementById('showFollowerModal');
            const userId = showFollowerModal.getAttribute('data-user-id');
            const response = await fetch(`/followers?user_id=${userId}`);
            const followers = await response.json();

            const followerList = document.getElementById('followerList');
            followerList.style.height = '300px'
            followerList.style.overflowY = 'auto'
            followerList.innerHTML = ''; // Limpa a lista existente

            followers.forEach(follower => {
                const userLink = document.createElement('a');
                userLink.href = `/user/profile?userId=${follower.id}`; // Insere o link para o perfil do usuário
                userLink.className = 'text-decoration-none text-dark'; // Remove sublinhado e muda a cor do texto

                const userDiv = document.createElement('div');
                userDiv.className = 'd-flex align-items-center m-0 p-0';

                if (follower.picture) {
                    // Se a imagem existir
                    const userImage = document.createElement('img');
                    userImage.src = follower.picture;
                    userImage.className = 'rounded-circle my-2';
                    userImage.style.width = '40px';
                    userImage.style.height = '40px';
                    userImage.style.marginRight = '10px';
                    userDiv.appendChild(userImage);
                } else {
                    // Se a imagem for nula, exibe o ícone
                    const userIcon = document.createElement('i');
                    userIcon.className = 'bi bi-person-circle';
                    userIcon.style.fontSize = '40px'; // Define o tamanho do ícone
                    userIcon.style.marginRight = '10px';
                    userDiv.appendChild(userIcon);
                }

                const userName = document.createElement('span');
                userName.textContent = follower.username;

                userDiv.appendChild(userName);
                userLink.appendChild(userDiv); // Adiciona o div dentro do link
                followerList.appendChild(userLink); // Adiciona o link na lista
            });
        });
    });
</script>