<div class="modal fade" id="modalLikes" tabindex="-1" aria-labelledby="modalLikesLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="modalLikesLabel">Likes</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="likeList">
                    <!-- Lista de likes serÃ¡ injetada aqui -->
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function loadLikes(element) {
        const bookId = element.getAttribute('data-book-id');

        fetch(`/likes?book_id=${bookId}`)
            .then(response => response.json())
            .then(likes => {
                const likeList = document.getElementById('likeList');
                likeList.style.maxHeight = '350px';
                likeList.style.overflowY = 'auto';
                likeList.innerHTML = ''; // Limpa a lista existente

                if (likes.length > 0) {
                    likes.forEach(like => {
                        const listItem = document.createElement('div');
                        listItem.classList.add('d-flex', 'align-items-center');

                        const userLink = document.createElement('a');
                        userLink.href = `/user/profile?userId=${like.id}`;
                        userLink.className = 'text-decoration-none text-dark d-flex align-items-center';

                        const userInfo = document.createElement('div');
                        userInfo.className = 'd-flex align-items-center';

                        if (like.picture) {
                            const userImage = document.createElement('img');
                            userImage.src = like.picture;
                            userImage.alt = like.username;
                            userImage.className = 'rounded-circle my-2';
                            userImage.width = 40;
                            userImage.height = 40;
                            userImage.style.marginRight = '10px';
                            userInfo.appendChild(userImage);
                        } else {
                            const userIcon = document.createElement('i');
                            userIcon.className = 'bi bi-person-circle';
                            userIcon.style.fontSize = '40px';
                            userIcon.style.marginRight = '10px';
                            userInfo.appendChild(userIcon);
                        }

                        const userName = document.createElement('span');
                        userName.textContent = like.username;

                        userInfo.appendChild(userName);
                        userLink.appendChild(userInfo);  // Adiciona o div com a imagem e nome no link
                        listItem.appendChild(userLink);  // Adiciona o link no item da lista

                        likeList.appendChild(listItem);  // Adiciona o item da lista no container principal
                    });
                } else {
                    likeList.innerHTML = '<p>No likes yet.</p>';
                }
            })
            .catch(error => {
                console.error('Error fetching likes:', error);
            });
    }
</script>